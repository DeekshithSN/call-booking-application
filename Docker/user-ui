FROM node:17.9.0-slim
WORKDIR /app
RUN useradd user-ui \
    && chown user-ui /app

COPY . .
RUN npm install
EXPOSE 3000
RUN apt-get update -y \
  && apt-get install libcap2-bin -y \
  && setcap cap_net_bind_service=+ep `readlink -f \`which node\``
USER user-ui
CMD ["npm","start"]
